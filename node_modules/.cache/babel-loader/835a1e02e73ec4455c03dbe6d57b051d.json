{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\mrocc\\\\cap-man\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\mrocc\\\\cap-man\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _assertThisInitialized from\"C:\\\\Users\\\\mrocc\\\\cap-man\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"C:\\\\Users\\\\mrocc\\\\cap-man\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\mrocc\\\\cap-man\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\mrocc\\\\cap-man\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\mrocc\\\\cap-man\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import*as React from\"react\";import AllocationForm from\"./AllocationList\";var EmployeeList=/*#__PURE__*/function(_React$Component){_inherits(EmployeeList,_React$Component);var _super=_createSuper(EmployeeList);function EmployeeList(){_classCallCheck(this,EmployeeList);return _super.apply(this,arguments);}_createClass(EmployeeList,[{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'#eeddd3'}},this.props.employees.map(function(employee){return['BA','QA','Dev'].map(function(role){if(_this.props.allocations.filter(function(allocation){return allocation.role===role&&allocation.employeeId===employee.id&&allocation.projectId===_this.props.projectId;}).length>0)return/*#__PURE__*/React.createElement(\"div\",null,employee.name,\" \",role,_this.props.allocations.filter(function(allocation){return allocation.role===role&&allocation.employeeId===employee.id&&allocation.projectId===_this.props.projectId;}).map(function(allocation){return/*#__PURE__*/React.createElement(Allocation,Object.assign({refreshState:_this.props.refreshState,employees:_this.props.employees},allocation));}));});}));}}]);return EmployeeList;}(React.Component);var Allocation=/*#__PURE__*/function(_React$Component2){_inherits(Allocation,_React$Component2);var _super2=_createSuper(Allocation);function Allocation(props){var _this2;_classCallCheck(this,Allocation);_this2=_super2.call(this,props);_this2.state={isEditing:false};_this2.deleteAllocation=_this2.deleteAllocation.bind(_assertThisInitialized(_this2));_this2.toggleEdit=_this2.toggleEdit.bind(_assertThisInitialized(_this2));return _this2;}_createClass(Allocation,[{key:\"toggleEdit\",value:function toggleEdit(){this.setState({isEditing:!this.state.isEditing});}},{key:\"deleteAllocation\",value:function(){var _deleteAllocation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.confirm('Are you sure')){_context.next=12;break;}_context.prev=1;_context.next=4;return fetch('https://localhost:44391/api/allocations/'+this.props.id,{method:'delete',headers:{'Accept':'application/json','Content-type':'application/json'}});case 4:result=_context.sent;console.log('Result '+result);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:this.props.refreshState();case 12:case\"end\":return _context.stop();}}},_callee,this,[[1,8]]);}));function deleteAllocation(_x){return _deleteAllocation.apply(this,arguments);}return deleteAllocation;}()},{key:\"render\",value:function render(){var allocation=this.props;if(this.state.isEditing){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AllocationForm,{refreshState:this.props.refreshState,employees:this.props.employees,isEditing:this.state.isEditing,toggleEdit:this.toggleEdit,id:allocation.id,projectId:allocation.projectId,employeeId:allocation.employeeId,role:allocation.role,startDate:allocation.startDate,endDate:allocation.endDate,allocation:allocation.allocation1,weight:allocation.workWeight}));}else{return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'#eeddd3'}},\"Months: \",allocation.startDate.substring(5,7),\"/\",allocation.startDate.substring(0,4),\" - \",allocation.endDate.substring(5,7),\"/\",allocation.endDate.substring(0,4),\" Allocation: \",allocation.allocation1,\"% Weight: \",allocation.workWeight,/*#__PURE__*/React.createElement(\"button\",{onClick:this.toggleEdit},\"Update\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.deleteAllocation},/*#__PURE__*/React.createElement(\"img\",{src:\"https://icon-library.com/images/delete-icon-png-16x16/delete-icon-png-16x16-21.jpg\",alt:\"my image\",width:\"12\",height:\"12\"})));}}}]);return Allocation;}(React.Component);export default EmployeeList;","map":{"version":3,"sources":["C:/Users/mrocc/cap-man/src/EmployeeList.js"],"names":["React","AllocationForm","EmployeeList","backgroundColor","props","employees","map","employee","role","allocations","filter","allocation","employeeId","id","projectId","length","name","refreshState","Component","Allocation","state","isEditing","deleteAllocation","bind","toggleEdit","setState","window","confirm","fetch","method","headers","result","console","log","startDate","endDate","allocation1","workWeight","substring"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport AllocationForm from \"./AllocationList\";\r\n\r\n\r\nclass EmployeeList extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n\t\t\t<div style = {{backgroundColor : '#eeddd3'}}>\r\n                  {this.props.employees.map(employee => \r\n                    ['BA', 'QA', 'Dev'].map(role => {\r\n                        if (\r\n                            this.props.allocations.filter(\r\n                            allocation => (allocation.role === role\r\n                            && allocation.employeeId === employee.id\r\n                            && allocation.projectId === this.props.projectId)).length > 0\r\n                        )\r\n                        return <div>\r\n                            {employee.name} {role}\r\n                            {this.props.allocations.filter(allocation =>\r\n                                allocation.role === role\r\n                                && allocation.employeeId === employee.id \r\n                                && allocation.projectId === this.props.projectId)\r\n                                .map(allocation => <Allocation refreshState = {this.props.refreshState} employees = {this.props.employees} {...allocation}/>                \r\n                                )}\r\n                        </div>   \r\n                    }              \r\n                    )\r\n                )}\r\n\t\t\t</div>\t\t\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass Allocation extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            isEditing: false\r\n        }\r\n        this.deleteAllocation = this.deleteAllocation.bind(this);\r\n        this.toggleEdit = this.toggleEdit.bind(this);\r\n    }\r\n\r\n    toggleEdit() {\r\n        this.setState ({\r\n            isEditing: !this.state.isEditing\r\n        })\r\n    }\r\n\r\n    async deleteAllocation(id) {\r\n        if(window.confirm('Are you sure')) {     \r\n            try { \r\n                const result = await fetch('https://localhost:44391/api/allocations/' + this.props.id, {\r\n                    method: 'delete',\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        'Content-type':'application/json',\r\n                    }\r\n                })\r\n    \r\n                console.log('Result ' + result)\r\n            } catch (e) {\r\n                console.log(e)\r\n            }\r\n            this.props.refreshState();\r\n        }\r\n    }\r\n\r\n \trender() {\r\n      const allocation = this.props;\r\n\r\n      if (this.state.isEditing) {\r\n        return (\r\n            <div>\r\n                <AllocationForm \r\n                    refreshState = {this.props.refreshState}\r\n                    employees = {this.props.employees}\r\n                    isEditing = {this.state.isEditing} \r\n                    toggleEdit = {this.toggleEdit}\r\n                    id = {allocation.id}\r\n                    projectId = {allocation.projectId}\r\n                    employeeId = {allocation.employeeId}\r\n                    role = {allocation.role}\r\n                    startDate = {allocation.startDate}\r\n                    endDate = {allocation.endDate}\r\n                    allocation = {allocation.allocation1}\r\n                    weight = {allocation.workWeight}\r\n                />\r\n            </div>\r\n        )\r\n      }\r\n      else {\r\n        return (\r\n            <div style = {{backgroundColor : '#eeddd3'}}>\r\n                Months: {allocation.startDate.substring(5, 7)}/{allocation.startDate.substring(0, 4)} - {allocation.endDate.substring(5, 7)}/{allocation.endDate.substring(0, 4)} Allocation: {allocation.allocation1}%\r\n                Weight: {allocation.workWeight}\r\n                <button onClick = {this.toggleEdit}>Update</button>\r\n                <button onClick={this.deleteAllocation}><img src=\"https://icon-library.com/images/delete-icon-png-16x16/delete-icon-png-16x16-21.jpg\" alt=\"my image\" width=\"12\" height=\"12\"/></button>\r\n            </div>\r\n        );\r\n      }\r\n  \t\r\n  }\r\n}\r\nexport default EmployeeList;"]},"metadata":{},"sourceType":"module"}